<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shop Now</title>
    <link rel="shortcut icon" href="./img/favicon.webp" type="image/x-icon">
    <link rel="stylesheet" href="./CSS/style.css">
    <style>
        .cardhead {
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .cards {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 150px;
            flex-wrap: wrap;
            column-gap: 20px;
            row-gap: 20px;
            width: 80%;
        }

        .cards>.card1>i {
            margin-top: 5px;

        }

        .cards>.card1>h4 {
            margin-top: 15px;

        }

        .cards>.card1>button {
            margin-top: 15px;
            width: 100%;
            height: 50px;
            border: none;
            border-radius: 10px;
            background-color: rgb(182, 181, 181);
        }

        .cards>.card1>img {
            width: 300px;
            height: 450px;

        }
    </style>
</head>

<body>

    <div id="__next" data-reactroot="">
        <style>
            #nprogress {
                pointer-events: none;
            }

            #nprogress .bar {
                background: #4f46e5;
                position: fixed;
                z-index: 9999;
                top: 0;
                left: 0;
                width: 100%;
                height: 4px;
            }

            #nprogress .peg {
                display: block;
                position: absolute;
                right: 0px;
                width: 100px;
                height: 100%;
                box-shadow: 0 0 10px #4f46e5, 0 0 5px #4f46e5;
                opacity: 1;
                -webkit-transform: rotate(3deg) translate(0px, -4px);
                -ms-transform: rotate(3deg) translate(0px, -4px);
                transform: rotate(3deg) translate(0px, -4px);
            }

            #nprogress .spinner {
                display: block;
                position: fixed;
                z-index: 1031;
                top: 15px;
                right: 15px;
            }

            #nprogress .spinner-icon {
                width: 18px;
                height: 18px;
                box-sizing: border-box;
                border: solid 2px transparent;
                border-top-color: #4f46e5;
                border-left-color: #4f46e5;
                border-radius: 50%;
                -webkit-animation: nprogresss-spinner 400ms linear infinite;
                animation: nprogress-spinner 400ms linear infinite;
            }

            .nprogress-custom-parent {
                overflow: hidden;
                position: relative;
            }

            .nprogress-custom-parent #nprogress .spinner,
            .nprogress-custom-parent #nprogress .bar {
                position: absolute;
            }

            @-webkit-keyframes nprogress-spinner {
                0% {
                    -webkit-transform: rotate(0deg);
                }

                100% {
                    -webkit-transform: rotate(360deg);
                }
            }

            @keyframes nprogress-spinner {
                0% {
                    transform: rotate(0deg);
                }

                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
        <nav class="sticky top-0 bg-slate-900 bg-opacity-90 backdrop-blur backdrop-filter z-40"
            data-headlessui-state="">
            <div class="max-w-7xl mx-auto px-2 sm:px-4 lg:px-8">
                <div class="relative flex h-16 md:h-20 lg:gap-x-4 justify-between items-center">
                    <div class="flex items-center justify-center gap-x-2">
                        <div class="flex-shrink-0 flex items-center text-2xl font-bold focus:outline-none focus:ring px-3 py-2 rounded-sm gap-x-2 cursor-pointer"
                            href="/"><span
                                style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span
                                    style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img
                                        style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0"
                                        alt="" aria-hidden="true"
                                        src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%2732%27%20height=%2732%27/%3e"></span><img
                                    alt=""
                                    src="https://www.next.co.uk/static-content/icons/header/next/v1/vision/new-next-black-logo.svg"
                                    decoding="async" data-nimg="intrinsic" class="w-full h-full"
                                    style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"
                                    srcset="https://www.next.co.uk/static-content/icons/header/next/v1/vision/new-next-black-logo.svg 1x, https://www.next.co.uk/static-content/icons/header/next/v1/vision/new-next-black-logo.svg 2x"><noscript><img
                                        alt=""
                                        srcSet="https://www.next.co.uk/static-content/icons/header/next/v1/vision/new-next-black-logo.svg 1x, https://www.next.co.uk/static-content/icons/header/next/v1/vision/new-next-black-logo.svg 2x"
                                        src="https://www.next.co.uk/static-content/icons/header/next/v1/vision/new-next-black-logo.svg"
                                        decoding="async" data-nimg="intrinsic"
                                        style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"
                                        class="w-full h-full" loading="lazy" /></noscript></span><span
                                class="text-white hidden md:inline">NextShop</span></div>
                        <div class="hidden lg:block lg:ml-6">
                            <div class="flex space-x-4"><span
                                    class="bg-gray-900 text-white px-3 py-2 rounded-md text-sm font-medium cursor-pointer"
                                    href="/">Home</span><span
                                    class="text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium cursor-pointer"
                                    href="/search"><a href="./Shopnow.html" style="color: white;">Shop
                                        Now</a></span></div>
                        </div>
                    </div>
                    <div class="flex-1 flex justify-center items-center px-2 lg:ml-6 lg:justify-end">
                        <form class="max-w-lg w-full lg:max-w-xs"><label for="search" class="sr-only">Search</label>
                            <div class="relative">
                                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                        stroke-width="2" stroke="currentColor" aria-hidden="true"
                                        class="h-5 w-5 text-gray-400">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                                    </svg>
                                </div><input type="search" id="search" name="search"
                                    class="block w-full pl-10 pr-3 py-2 border border-transparent rounded-md leading-5 bg-gray-700 text-gray-300 placeholder-gray-400 focus:outline-none focus:bg-white focus:border-white focus:ring-white focus:text-gray-900 sm:text-sm lg:max-w-sm"
                                    placeholder="Search" value="">
                            </div>
                        </form>
                    </div>
                    <div class="flex items-center lg:hidden"><button
                            class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white focus:outline-none focus:ring-1 focus:ring-offset-1 focus:ring-offset-gray-800 focus:ring-white"
                            id="headlessui-disclosure-button-2" type="button" aria-expanded="false"
                            data-headlessui-state=""><span class="sr-only">Open main menu</span><svg
                                xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                                stroke="currentColor" aria-hidden="true" class="block h-6 w-6">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16">
                                </path>
                            </svg></button></div>
                    <div class="flex items-center">
                        <a href="./Cart.html">
                            <button type="button"
                                class="relative flex-shrink-0 p-2 text-gray-400 hover:text-white focus:outline-none focus:ring-1 focus:ring-offset-1 focus:ring-offset-gray-800 focus:ring-white rounded-md"
                                href="./Cart.html"><span class="sr-only">View Cart</span><svg
                                    xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                                    stroke="currentColor" aria-hidden="true" class="h-6 w-6">
                                    <path stroke-linecap="round" stroke-linejoin="round"
                                        d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path>
                                </svg></button>
                        </a>
                        <div class="relative flex-shrink-0 z-40" data-headlessui-state="">
                            <div class="flex-shrink-0 text-white hidden lg:flex flex-col ml-4"><span
                                    class="text-gray-300 font-medium">Hello,</span>
                            </div>
                            <button id="signout" style=" align-items: center; color: white ;"> Sign Out </button>
                        </div>
                    </div>
                </div>
            </div>
        </nav>
        <div class="sticky top-0 p-4 z-10 bg-white border-b border-gray-200 mb-4"
            style="margin-left: 80px;margin-right: 80px;">
            <section aria-labelledby="filter-heading">
                <h2 id="filter-heading" class="sr-only">Filters</h2>
                <div class="">
                    <div class="max-w-7xl mx-auto px-4 flex items-center justify-between sm:px-6 lg:px-8">
                        <div class="relative inline-block text-left" data-headlessui-state="">
                            <div><button
                                    class="group inline-flex justify-center text-sm font-medium text-gray-700 hover:text-gray-900"
                                    id="headlessui-menu-button-17" type="button" aria-haspopup="true"
                                    aria-expanded="false" data-headlessui-state="">Sort<svg
                                        xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"
                                        aria-hidden="true"
                                        class="flex-shrink-0 -mr-1 ml-1 h-5 w-5 text-gray-400 group-hover:text-gray-500">
                                        <path fill-rule="evenodd"
                                            d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                                            clip-rule="evenodd"></path>
                                    </svg></button></div>
                        </div><button type="button"
                            class="text-gray-700 hover:text-gray-900  inline-block text-sm font-medium sm:hidden">Filters</button>
                        <div class="hidden sm:block">
                            <div class="flow-root">
                                <div class="-mx-4 flex items-center divide-x divide-gray-200">
                                    <div class="px-4 relative inline-block text-left" data-headlessui-state="">
                                        <button class="group inline-flex justify-center text-sm font-medium"
                                            id="headlessui-popover-button-18" type="button" aria-expanded="false"
                                            data-headlessui-state=""><span
                                                class="text-gray-700 hover:text-gray-900">Categories</span><svg
                                                xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"
                                                fill="currentColor" aria-hidden="true"
                                                class="flex-shrink-0 -mr-1 ml-1 h-5 w-5 text-gray-400 group-hover:text-gray-500">
                                                <path fill-rule="evenodd"
                                                    d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                                                    clip-rule="evenodd"></path>
                                            </svg></button>
                                    </div>
                                    <div class="px-4 relative inline-block text-left" data-headlessui-state="">
                                        <button class="group inline-flex justify-center text-sm font-medium"
                                            id="headlessui-popover-button-21" type="button" aria-expanded="false"
                                            data-headlessui-state=""><span
                                                class="text-gray-700 hover:text-gray-900">Brands</span><svg
                                                xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"
                                                fill="currentColor" aria-hidden="true"
                                                class="flex-shrink-0 -mr-1 ml-1 h-5 w-5 text-gray-400 group-hover:text-gray-500">
                                                <path fill-rule="evenodd"
                                                    d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                                                    clip-rule="evenodd"></path>
                                            </svg></button>
                                    </div>
                                    <div class="px-4 relative inline-block text-left" data-headlessui-state="">
                                        <button class="group inline-flex justify-center text-sm font-medium"
                                            id="headlessui-popover-button-24" type="button" aria-expanded="false"
                                            data-headlessui-state=""><span
                                                class="text-gray-700 hover:text-gray-900">Prices</span><svg
                                                xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"
                                                fill="currentColor" aria-hidden="true"
                                                class="flex-shrink-0 -mr-1 ml-1 h-5 w-5 text-gray-400 group-hover:text-gray-500">
                                                <path fill-rule="evenodd"
                                                    d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                                                    clip-rule="evenodd"></path>
                                            </svg></button>
                                    </div>
                                    <div class="px-4 relative inline-block text-left" data-headlessui-state="">
                                        <button class="group inline-flex justify-center text-sm font-medium"
                                            id="headlessui-popover-button-27" type="button" aria-expanded="false"
                                            data-headlessui-state=""><span
                                                class="text-gray-700 hover:text-gray-900">Ratings</span><svg
                                                xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"
                                                fill="currentColor" aria-hidden="true"
                                                class="flex-shrink-0 -mr-1 ml-1 h-5 w-5 text-gray-400 group-hover:text-gray-500">
                                                <path fill-rule="evenodd"
                                                    d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                                                    clip-rule="evenodd"></path>
                                            </svg></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
        <div class="cardhead">
            <div class="cards" id="show">

            </div>
        </div>

        <div class="block md:hidden -mt-4">
            <p class="text-sm font-semibold text-indigo-600 hover:text-indigo-500 cursor-pointer"
                href="/search?sort=newest">Browse all<span aria-hidden="true"> →</span></p>
        </div>
        </section>
    </div>
    </div>
    <footer class="bg-gray-800 mt-4" aria-labelledby="footer-heading">
        <div class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between">
                <p class="mt-2 text-base text-gray-300 md:mt-0">© 2023 NextShop. All rights reserved.</p>
            </div>
        </div>
    </footer>
    </div>
    <div style="position:fixed;z-index:9999;top:16px;left:16px;right:16px;bottom:16px;pointer-events:none"></div>
    </div>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-app.js";
        import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-auth.js";
        import { getFirestore, collection, query, onSnapshot, doc, where, addDoc } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-firestore.js";
        import { getStorage, ref, getDownloadURL } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-storage.js"
        // TODO: Add SDKs for Firebase prod+ucts that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries

        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
            apiKey: "AIzaSyB3ZvtJgykA5zlFpKuhnsSq_Ay6HKZlNec",
            authDomain: "task-e2185.firebaseapp.com",
            projectId: "task-e2185",
            storageBucket: "task-e2185.appspot.com",
            messagingSenderId: "447773639548",
            appId: "1:447773639548:web:c917761b6d901682781af9",
            measurementId: "G-0D3K0WGC3G"
        };


        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const storage = getStorage(app);

        onAuthStateChanged(auth, (user) => {
            if (user) {
                document.getElementById("headlessui-menu-button-1").innerHTML = user.email
                document.getElementById("headlessui-menu-button-1").href = ""
            } else {

            }
        })

        const q1 = query(collection(db, "Nextproducts"));
        onSnapshot(q1, (querySnapshot) => {
            querySnapshot.forEach((doc) => {
                getDownloadURL(ref(storage, doc.data().Title))
                    .then(async (url) => {
                        document.getElementById("show").innerHTML +=
                            `   
                <div class="card1" onclick="detail('${url}' , '${doc.data().Title}' , '${doc.data().Description}' , '${doc.data().Price}')">
                <img src="${url}" alt="Products">
                <p style="margin-top:10px;">${doc.data().Title}</p>
                <i style="color: purple;" class="fa-solid fa-star"></i><i style="color: purple;" class="fa-solid fa-star"></i><i style="color: purple;" class="fa-solid fa-star"></i><i style="color: purple;" class="fa-solid fa-star"></i><i style="color: purple;" class="fa-solid fa-star"></i>
                <h4>${doc.data().Price}$</h4>
                <button>Go to detail</button> 
            </div>
                 `
                    })
            })
        })
        function detail(url, title, description, price) {
            var Details = {
                Image: url,
                Title: title,
                Description: description,
                Price: price,
                Quantity: "1",
            }

            localStorage.setItem("Detail", JSON.stringify(Details))
            window.location.href = './Detail.html'
        }
        window.detail = detail

        document.getElementById("signout").addEventListener('click', () => {
            signOut(auth).then(() => {
                Swal.fire({
                    title: `Log Out`,
                    text: `Log Out Successfully `,
                    icon: 'success',
                    confirmButtonText: 'OK'
                });
                function wrongs() {
                    window.location.href = "./SignUp.html";
                }
                setInterval(wrongs, 3000);
            }).catch((error) => {
                console.log("LogOut Error -->", error)
            });
        });

        onAuthStateChanged(auth, (user) => {
            if (user) {
                const uid = user.uid;
                console.log("User Checking UID: ", uid);
            }
            else {
                Swal.fire({
                    title: `Account`,
                    text: `First Create An Account`,
                    icon: 'error',
                    confirmButtonText: 'OK'
                });
                function wrong() {
                    window.location.href = "./SignUp.html"
                }
                setInterval(wrong, 2000);
            }
        });

    </script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</body>

</html>